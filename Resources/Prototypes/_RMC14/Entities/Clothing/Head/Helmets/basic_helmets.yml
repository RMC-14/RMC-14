# base
- type: entity
  parent: ClothingHeadBase
  id: RMCHelmetBase
  abstract: true
  name: helmet
  components:
  - type: Item
    size: Normal
    storedRotation: 0
  - type: Storage
    maxItemSize: Tiny
    grid:
    - 0,0,7,1 # 4 slots, only 2 can fit useful items (meds, cigarettes)
    blacklist:
      tags:
      - Pouch
  - type: LimitedStorage
    limits:
    - popup: rmc-storage-limit-cant-fit
      count: 2
      whitelist:
        components:
        - RMCFlask
        - CMScalpel
        - CassettePlayer
        - CassetteTape
        tags:
        #       - TODO RMC14 cards
        - Slice
        #       - TODO RMC14 glasses (eyewear)
        - Pen
        - Crayon
        - RMCHandful
        - Flashlight
        - Brutepack
        - CMOintment
        - CMAutoInjector
        - PillPacket
        - Syringe
        - Pill
  - type: ContainerContainer
    containers:
      storagebase: !type:Container
        ents: [ ]
  - type: UserInterface
    interfaces:
      enum.StorageUiKey.Key:
        type: StorageBoundUserInterface
  - type: CMHardArmor
  - type: RMCNameItemOnVend
    item: Helmet
  - type: ExplosionResistance
    damageCoefficient: 0
    worn: false
  - type: EmitSoundOnPickup
    sound:
      collection: RMCEquipArmor
  - type: EmitSoundOnLand
    sound:
      collection: RMCEquipArmor
  - type: IgnoreContentsSize
    items:
      components:
      - RMCLighter
      - RMCFlask
      - CMScalpel
      - Figurine
      - HelmetAccessory
      - CassettePlayer
      - CassetteTape
      tags:
      - CigPack
      - Cigarette
      #      - TODO RMC14 cards
      - Slice
      #      - TODO RMC14 glasses (eyewear)
      - Pen
      - Crayon
      - RMCHandful
      - Flashlight
      - Brutepack
      - CMOintment
      - CMAutoInjector
      - PillPacket
  - type: FixedItemSizeStorage
  - type: InteractedBlacklist
    blacklist:
      components:
      - Xeno
  - type: Appearance
  - type: HelmetAccessoryHolder
    isHat: false

- type: entity
  parent: RMCHelmetBase
  id: RMCMarineHelmetBase
  abstract: true
  components:
  - type: CMArmor
    melee: 20
    bullet: 20
    explosionArmor: 10
  - type: RMCBulkyArmor
  - type: OverwatchCamera
  - type: SquadArmor
    layer: Helmet
    slot: HEAD
    rsi:
      sprite: _RMC14/Objects/Clothing/Head/Helmets/helmet_overlays.rsi
      state: std-helmet
    leaderRsi:
      sprite: _RMC14/Objects/Clothing/Head/Helmets/helmet_overlays.rsi
      state: sql-helmet
  - type: CycleableVisor
    offIcon:
      sprite: _RMC14/Objects/Clothing/helmet_visors.rsi
      state: sight_up
    containers:
    - rmc_visor_one
    - rmc_visor_two
  - type: IntegratedVisors
    visorsToAdd:
    - RMCVisorSquadIntegrated

- type: entity
  parent: RMCMarineHelmetBase
  id: RMCMarineHelmetWithLightBase
  abstract: true
  components:
  - type: Item
    heldPrefix: off
  - type: Clothing
    clothingVisuals:
      head:
      - state: equipped-HELMET
  - type: Sprite
    layers:
    - state: icon
    - state: icon-flash
      visible: false
      map: [ "light" ]
  - type: ItemTogglePointLight
  - type: ToggleableVisuals
    spriteLayer: light
    clothingVisuals:
      head:
      - state: on-equipped-HELMET
  - type: RMCSuitLight
  - type: PointLight
    enabled: false
    radius: 5
    offset: 0,-0.85
    rotation: 90
    softness: 5
    autoRot: true
    netsync: false
    color: "#FFFFFF"
    mask: /Textures/_RMC14/Effects/LightMasks/wide_ellipsis.png
  - type: PointLightRotation
    rotation: 90
  - type: HandheldLight
    addPrefix: true
    blinkingBehaviourId: blinking
    radiatingBehaviourId: radiating
    turnOffSound:
      path: /Audio/_RMC14/Handling/suitlight_crank.ogg
    turnOnSound:
      path: /Audio/_RMC14/Machines/suitlight_on.ogg
  - type: LightBehaviour
    behaviours:
    - !type:FadeBehaviour
      id: radiating
      interpolate: Linear
      maxDuration: 2.0
      startValue: 3.0
      endValue: 2.0
      isLooped: true
      property: Radius
      enabled: false
      reverseWhenFinished: true
    - !type:PulseBehaviour
      id: blinking
      interpolate: Nearest
      maxDuration: 1.0
      minValue: 0.1
      maxValue: 2.0
      isLooped: true
      property: Radius
      enabled: false
  - type: Battery
    maxCharge: 600 #lights drain 3/s but recharge of 2 makes this 1/s. Therefore 600 is 10 minutes of light.
    startingCharge: 600
  - type: BatterySelfRecharger
    autoRecharge: true
    autoRechargeRate: 2 #recharge of 2 makes total drain 1w / s so max charge is 1:1 with time. Time to fully charge should be 5 minutes. Having recharge gives light an extended flicker period which gives you some warning to return to light area.

- type: entity
  id: RMCFoldableHelmetBase
  abstract: true
  components:
  - type: Foldable
    unfoldVerbText: "rmc-untuck"
    foldVerbText: "rmc-tuck"
    canFoldInsideContainer: true
  - type: FoldableClothing
    foldedHideLayers:
    - Hair
    - HeadTop
    - HeadSide
    unfoldedHideLayers: [ ]
  - type: HideLayerClothing
