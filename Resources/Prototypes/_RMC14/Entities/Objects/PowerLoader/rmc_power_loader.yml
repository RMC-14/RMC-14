# Base
- type: entity
  abstract: true
  id: RMCMechBase
  components:
  - type: Corrodible
    isCorrodible: true
  - type: Sprite
    drawdepth: Mobs
    noRot: true
    sprite: _RMC14/Objects/power_loader.rsi
    layers:
    - state: powerloader_open
      map: [ "strap" ]
  - type: MobMover
  - type: DoAfter
  - type: MeleeWeapon
    hidden: true
    attackRate: 1
    damage:
      types:
        Blunt: 30
    soundHit:
      collection: MetalThud
  - type: Puller
    needsHands: false
  - type: InputMover
  - type: InteractionOutline
  - type: MovementSpeedModifier
    baseWalkSpeed: 1
    baseSprintSpeed: 1
  - type: Tag
    tags:
    - DoorBumpOpener
    - FootstepSound
  - type: Physics
    bodyType: KinematicController
  - type: Clickable
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeCircle
          radius: 0.35
        density: 1000
        mask:
        - MobMask
        layer:
        - MobLayer
  - type: Appearance
  - type: ContainerContainer
    containers:
      rmc-mech-pilot: !type:ContainerSlot
  - type: Damageable
    damageContainer: Inorganic
  - type: FootstepModifier
    footstepSoundCollection:
      path: /Audio/Mecha/sound_mecha_powerloader_step.ogg
  - type: RMCAllowStrapMovement
  - type: Strap
    buckleSound:
      path: _RMC14/Mecha/powerloader_buckle.ogg
      params:
        variation: 0.1
    unbuckleSound:
      path: _RMC14/Mecha/powerloader_unbuckle.ogg
      params:
        variation: 0.1
    blacklist:
      components:
      - Xeno
  - type: RMCStrapDrawDepthComponent
    unstrappedDepth: Mobs
    strappedDepth: OverMobs
  - type: RMCStrapVisualsComponent
  - type: GenericVisualizer
    visuals:
      enum.SharedBagOpenVisuals.BagState:
        strap:
          Strapped: { state: powerloader_overlay }
          Unstrapped: { state: powerloader_open }
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 400
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
      - !type:SpawnEntitiesBehavior
        spawn:
          RMCPowerCellAPC:
            min: 1
            max: 1
      - !type:DoActsBehavior
        acts: ["Destruction"]

# Wreckages
- type: entity
  id: RMCMechPowerLoaderWreckage
  name: LU-50 Power Loader wreckage
  description: The wreckage of a LU-50 Power Loader.
  components:
  - type: Corrodible
    isCorrodible: true
  - type: Sprite
    drawdepth: BelowMobs
    noRot: true
    sprite: _RMC14/Objects/power_loader.rsi
    layers:
    - state: wreck
  - type: Clickable
  - type: InputMover
  - type: InteractionOutline
  - type: Damageable
    damageContainer: Inorganic
  - type: FootstepModifier
    footstepSoundCollection:
      path: /Audio/Mecha/sound_mecha_powerloader_step.ogg
  - type: Strap
    blacklist:
      components:
      - Xeno
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 100
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
      - !type:DoActsBehavior
        acts: ["Destruction"]

- type: entity
  parent: RMCMechPowerLoaderWreckage
  id: RMCMechPowerLoaderWreckageGreen
  name: Fujin 4100 Power Loader wreckage
  description: The wreckage of a Fujin 4100 Power Loader.
  components:
  - type: Sprite
    drawdepth: BelowMobs
    noRot: true
    sprite: _RMC14/Objects/power_loader.rsi
    layers:
    - state: wreck_jd

- type: entity
  parent: RMCMechPowerLoaderWreckage
  id: RMCMechPowerLoaderWreckageBlue
  name: Ferret Heavy Industries Mk4 Power Loader wreckage
  description: The wreckage of a Ferret Heavy Industries Mk4 Power Loader.
  components:
  - type: Sprite
    drawdepth: BelowMobs
    noRot: true
    sprite: _RMC14/Objects/power_loader.rsi
    layers:
    - state: wreck_ft

# Powerloaders
- type: entity
  parent: RMCMechBase
  id: RMCMechPowerLoader
  name: LU-50 Power Loader
  description: The LU-50 Power Loader is a commercial mechanized exoskeleton used for lifting heavy materials and objects, first designed on October 28, 2025 by the Weston Corporation. An old but trusted design used in warehouses, constructions and military ships everywhere.
  components:
  - type: PowerLoader
    skills:
      all:
        RMCSkillPowerLoader: 1
  - type: Hands
  - type: GiveHands
    hands:
    - name: Right Hand
      location: Right
    - name: Left Hand
      location: Left
  - type: IgnoreInteractionRange
    whitelist:
      tags:
      - RMCDropshipEnginePoint
    range: 2
  - type: SpawnOnTerminate
    spawn: RMCMechPowerLoaderWreckage

- type: entity
  parent: RMCMechPowerLoader
  id: RMCMechPowerLoaderGreen
  name: Fujin 4100 Power Loader
  description: The Fujin 4100 Power Loader is a commercial mechanized exoskeleton used for lifting heavy materials and objects based on the LU-50 Power Loader, first designed on October 28, 2025 by the Weston Corporation. An old but trusted design used in warehouses, constructions and military ships everywhere. This one has a signature green and yellow livery of Fujin. The label claims they make electronics and machinery, though you've never heard of them before.
  components:
  - type: Sprite
    layers:
    - state: owerloader_open_j
      map: [ "strap" ]
  - type: GenericVisualizer
    visuals:
      enum.SharedBagOpenVisuals.BagState:
        strap:
          Strapped: { state: powerloader_overlay_jd }
          Unstrapped: { state: powerloader_open_jd }
  - type: SpawnOnTerminate
    spawn: RMCMechPowerLoaderWreckageGreen

- type: entity
  parent: RMCMechPowerLoader
  id: RMCMechPowerLoaderBlue
  name: Ferret Heavy Industries Mk4 Power Loader
  description: The Ferret Heavy Industries Mk4 Power Loader is a commercial mechanized exoskeleton used for lifting heavy materials and objects based on the LU-50, first designed on October 28, 2025 by the Weston Corporation. An old but trusted design used in warehouses, constructions and military ships everywhere. This one has the signature blue and white livery of the now defunct Ferret Heavy Industries that went bankrupt in 2123.
  components:
  - type: Sprite
    layers:
    - state: powerloader_open_ft
      map: [ "strap" ]
  - type: GenericVisualizer
    visuals:
      enum.SharedBagOpenVisuals.BagState:
        strap:
          Strapped: { state: powerloader_overlay_ft }
          Unstrapped: { state: powerloader_open_ft }
  - type: SpawnOnTerminate
    spawn: RMCMechPowerLoaderWreckageBlue
