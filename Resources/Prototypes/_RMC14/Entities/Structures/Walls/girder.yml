- type: examinableDamage
  id: RMCGirderMessages
  messages:
    - rmc-girder-integrity-1
    - rmc-girder-integrity-2
    - rmc-girder-integrity-3
    - rmc-girder-integrity-4

- type: entity
  parent: BaseStructure
  id: CMGirder
  name: girder
  components:
  - type: Transform
    anchored: true
  - type: Physics
    bodyType: Static
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.45,-0.45,0.45,0.45"
        density: 60
        mask:
        - MachineMask
        layer:
        - GlassAirlockLayer
  - type: Clickable
  - type: InteractionOutline
  - type: StaticPrice
    price: 30
  - type: Sprite
    sprite: _RMC14/Structures/Walls/girder.rsi
    state: girder
  - type: Icon
    sprite: _RMC14/Structures/Walls/girder.rsi
    state: girder
  - type: Construction
    graph: CMGirder
    node: girder
  - type: Damageable
    damageModifierSet: RMCGirder
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 125
      behaviors:
        - !type:SpawnEntitiesBehavior
          spawn:
            RMCGirderDamaged:
              min: 1
              max: 1
        - !type:DoActsBehavior
          acts: [ "Destruction" ]
    - trigger:
        !type:DamageTrigger
        damage: 50
      behaviors:
      - !type:SpawnEntitiesBehavior
        spawn:
          RMCGirderDamaged:
            min: 1
            max: 1
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
  - type: ReceiverXenoClaws
    minimumClawStrength: VerySharp
    maxHealth: 125
    minimumXenoTier: 2
  - type: RMCDropshipBlocked
  - type: DamageMultiplierFlags
    flags: Breaching
  - type: XenoToggleChargingDamage
    stageLoss: 4
    damage:
      types:
        Blunt: 40
  - type: XenoCrusherChargable
  - type: RMCGenericExamine
    message: rmc-structure-girder-examine-tip
    whitelist:
      components:
      - Marine

- type: entity
  parent: CMGirder
  id: CMGirderReinforced
  name: reinforced girder
  components:
  - type: Sprite
    sprite: _RMC14/Structures/Walls/girder.rsi
    state: reinforced
  - type: Icon
    sprite: _RMC14/Structures/Walls/girder.rsi
    state: girder
  ##- type: Construction
  ##  graph: CMGirder
  ##  node: reinforcedGirder
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 500
      behaviors:
      - !type:SpawnEntitiesBehavior
        spawn:
          RMCGirderDamaged:
            min: 1
            max: 1
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
    - trigger:
        !type:DamageTrigger
        damage: 50
      behaviors:
      - !type:SpawnEntitiesBehavior
        spawn:
          RMCGirderDamaged:
            min: 1
            max: 1
      - !type:SpawnEntitiesBehavior
        spawn:
          CMSheetMetal1:
            min: 1
            max: 1
          CMSheetPlasteel1:
            min: 1
            max: 1
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
  - type: ReceiverXenoClaws
    maxHealth: 500
  - type: StaticPrice
    price: 66

- type: entity
  parent: CMGirder
  id: RMCGirderDisplaced # TODO RMC14 : Requires crowbarring to be used as a girder
  name: displaced
  suffix: Girder
  components:
  - type: Transform
    anchored: false
  - type: Sprite
    state: displaced
  - type: Icon
    state: displaced
    
- type: entity
  id: RMCGirderDamaged
  name: damaged girder
  description: A twisted girder that no longer blocks passage.
  components:
  - type: Transform
    anchored: true
  - type: Clickable
  - type: Sprite
    sprite: _RMC14/Structures/Walls/structures.rsi
    state: girder_damaged
  - type: Icon
    sprite: _RMC14/Structures/Walls/structures.rsi
    state: girder_damaged
  - type: ExaminableDamage
    messages: RMCGirderMessages
  - type: Damageable
    damageContainer: StructuralMarine
    damageModifierSet: StructuralMarine
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 100
      behaviors:
      - !type:SpawnEntitiesBehavior
        spawn:
          CMSheetMetal1:
            min: 1
            max: 1
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: Corrodible
    isCorrodible: true
    structure: true
  - type: ReceiverXenoClaws
    minimumClawStrength: Sharp
    maxHealth: 100
  - type: RMCRepairable
    delay: 3
  - type: RMCRepairableReplace
    prototype: CMGirder

  - type: RMCGenericExamine
    message: rmc-structure-displaced-examine-tip
    whitelist:
      components:
      - Marine
