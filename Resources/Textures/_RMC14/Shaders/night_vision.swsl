uniform sampler2D SCREEN_TEXTURE;
uniform highp vec3 nv_color;

void fragment() {
    highp vec4 color = zTextureSpec(SCREEN_TEXTURE, UV);

    // Subtle film grain; reduce intensity to half the original (0.025).
    highp float noise = (fract(sin(dot(UV * TIME, vec2(12.9898, 78.233))) * 43758.5453) - 0.5) * 2.0;
    color.rgb += noise * 0.01;

    // Apply the night vision tint
    color.rgb *= nv_color;

    COLOR = vec4(clamp(color.rgb, 0.0, 1.0), color.a);
}
