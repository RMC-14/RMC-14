using Content.Shared.CCVar;
using Content.Shared._RMC14.CCVar;
using Robust.Client.UserInterface;
using Robust.Client.UserInterface.XAML;
using Robust.Client.UserInterface.Controls;// RMC14
using Robust.Shared.IoC;
using Content.Client._RMC14.UI;
using Content.Client.Options.UI;
using Robust.Client.AutoGenerated;
using Content.Client._RMC14.NightVision;
using Robust.Shared.Configuration; // RMC14 END

namespace Content.Client.Options.UI.Tabs;

[GenerateTypedNameReferences]
public sealed partial class AccessibilityTab : Control
{
    [Dependency] private readonly IEntityManager _entityManager = default!; // RMC14
    private NightVisionPreferencesSystem _prefs => _entityManager.System<NightVisionPreferencesSystem>();

    public AccessibilityTab()
    {
        IoCManager.InjectDependencies(this); // RMC14
        RobustXamlLoader.Load(this);

        Control.AddOptionCheckBox(CCVars.ChatEnableColorName, EnableColorNameCheckBox);
        Control.AddOptionCheckBox(CCVars.AccessibilityColorblindFriendly, ColorblindFriendlyCheckBox);
        Control.AddOptionCheckBox(CCVars.ReducedMotion, ReducedMotionCheckBox);
        Control.AddOptionPercentSlider(CCVars.ChatWindowOpacity, ChatWindowOpacitySlider);
        Control.AddOptionPercentSlider(CCVars.SpeechBubbleTextOpacity, SpeechBubbleTextOpacitySlider);
        Control.AddOptionPercentSlider(CCVars.SpeechBubbleSpeakerOpacity, SpeechBubbleSpeakerOpacitySlider);
        Control.AddOptionPercentSlider(CCVars.SpeechBubbleBackgroundOpacity, SpeechBubbleBackgroundOpacitySlider);
        Control.AddOptionCheckBox(CCVars.ChatAutoFillHighlights, AutoFillHighlightsCheckBox);
        Control.AddOptionColorSlider(CCVars.ChatHighlightsColor, HighlightsColorSlider);

        Control.AddOptionCheckBox(RMCCVars.RMCUseAlternateSprites, RMCUseAlternateSpritesCheckBox); // RMC14
        Control.AddOptionCheckBox(RMCCVars.RMCChatSquadColorMode, RMCChatSquadColorModeCheckBox); // RMC14

        Control.AddOptionCheckBox(CCVars.AccessibilityClientCensorNudity, CensorNudityCheckBox);

        // RMC14
        var nightVisionOption = new NightVisionColorOption();
        NightVisionOptionContainer.AddChild(nightVisionOption);
        nightVisionOption.RegisterOption(Control);

        Control.Initialize();
    }
}
