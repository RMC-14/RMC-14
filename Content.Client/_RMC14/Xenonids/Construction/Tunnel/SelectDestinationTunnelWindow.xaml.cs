using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface.CustomControls;
using Robust.Client.UserInterface.XAML;

namespace Content.Client._RMC14.Xenonids.Construction.Tunnel;
[GenerateTypedNameReferences]
public sealed partial class SelectDestinationTunnelWindow : DefaultWindow
{
    public SelectDestinationTunnelWindow()
    {
        RobustXamlLoader.Load(this);
        IoCManager.InjectDependencies(this);
        
        Title = Loc.GetString("xeno-ui-select-destination-tunnel-title");
        SelectButton.Text = Loc.GetString("xeno-ui-select-destination-tunnel-submit-text");

        UpdateSelectedTunnelDisplay(null);
    }

    public void UpdateSelectedTunnelDisplay(string? selectedTunnelName)
    {
        if (selectedTunnelName == null)
        {
            SelectedTunnelLabel.Text = "None selected";
            SelectedTunnelLabel.ToolTip = "None selected";
            SelectedTunnelLabel.StyleClasses.Clear();
            SelectedTunnelLabel.StyleClasses.Add("LabelSecondary");
            SelectButton.Disabled = true;
        }
        else
        {
            var displayText = $"Selected: {selectedTunnelName}";
            SelectedTunnelLabel.Text = displayText;
            SelectedTunnelLabel.ToolTip = displayText;
            SelectedTunnelLabel.StyleClasses.Clear();
            SelectedTunnelLabel.StyleClasses.Add("LabelKeyHighlight");
            SelectButton.Disabled = false;
        }
    }

    public void UpdateCurrentTunnelDisplay(string? currentTunnelName)
    {
        var displayText = currentTunnelName != null
            ? $"Current: {currentTunnelName}"
            : "Current: Unknown";
        CurrentTunnelLabel.Text = displayText;
        CurrentTunnelLabel.ToolTip = displayText;
    }
}
