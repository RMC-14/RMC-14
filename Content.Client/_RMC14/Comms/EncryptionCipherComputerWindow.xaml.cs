using Content.Client.UserInterface.Controls;
using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface;
using Robust.Client.UserInterface.XAML;

namespace Content.Client._RMC14.Comms;

[GenerateTypedNameReferences]
public sealed partial class EncryptionCipherComputerWindow : FancyWindow
{
    public event Action<int>? ChangeSetting;
    public event Action? Print;
    public event Action? Refill;

    public string InputCode
    {
        get => InputCodeLabel.Text ?? "";
        set => InputCodeLabel.Text = value;
    }

    public int CipherSetting
    {
        get => int.TryParse(SettingLabel.Text, out var s) ? s : 0;
        set => SettingLabel.Text = value.ToString();
    }

    public string DecipheredWord
    {
        get => WordLabel.Text ?? "";
        set => WordLabel.Text = value;
    }

    public bool ValidWord
    {
        get => ValidLabel.Text == "Valid Word: Yes";
        set => ValidLabel.Text = "Valid Word: " + (value ? "Yes" : "No");
    }

    public string StatusMessage
    {
        get => StatusLabel.Text ?? "Ready for input";
        set => StatusLabel.Text = value;
    }

    public int PunchcardCount
    {
        get => int.TryParse(PunchcardCountLabel.Text?.Replace("Punchcards: ", ""), out var c) ? c : 10;
        set => PunchcardCountLabel.Text = $"Punchcards: {value}";
    }

    public EncryptionCipherComputerWindow()
    {
        RobustXamlLoader.Load(this);

        DecreaseButton.OnPressed += _ => ChangeSetting?.Invoke(-1);
        IncreaseButton.OnPressed += _ => ChangeSetting?.Invoke(1);

        PrintButton.OnPressed += _ => Print?.Invoke();

        RefillButton.OnPressed += _ => Refill?.Invoke();
    }
}
